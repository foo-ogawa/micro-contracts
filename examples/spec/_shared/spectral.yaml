# Shared Spectral rules
# Applied to all modules (extends global rules)
extends:
  - ../spectral.yaml                # Inherit global rules

rules:
  # Validate x-middleware values are from allowed list
  valid-middleware:
    description: x-middleware values must be defined in overlays
    severity: warn
    given: "$.paths[*][*].x-middleware[*]"
    then:
      function: enumeration
      functionOptions:
        values:
          - requireAuth
          - requireAdmin
          - tenantIsolation
          - rateLimit
          - correlationId

